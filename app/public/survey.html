<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0" />
    <title>Survey</title>
    <!-- CSS  -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.99.0/css/materialize.min.css">
</head>

<body>
    <a href="#" data-activates="slide-out" class="button-collapse"><i class="medium material-icons">menu</i></a>
    <ul id="slide-out" class="side-nav">
        <li><a href="/">Start Over</a></li>
        <li><a href="#">API Friends List</a></li>
        <li><a class="waves-effect" href="https://github.com/jamesw61/FriendFinder">Github Repo</a></li>
    </ul>
    <main>
        <div class="container">
            <div class="questions">
                <h4>Survey Questions</h4>
                <br>
                <br>
                <h5>About You</h5>
                <div class="row">
                    <form class="col s12">
                        <div class="row">
                            <div class="input-field col s4">
                                <input placeholder="Enter Your First Name" id="first_name" type="text" class="validate">
                                <label class="active" for="first_name">First Name (Required)</label>
                            </div>
                            <div class="input-field col s8">
                                <input placeholder="Paste a Link to Your Photo" id="photo" type="text" class="validate">
                                <label class="active" for="photo">Link to Photo (Required)</label>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="bacon">
                </div>
            </div>
            <br>
            <a class="waves-effect waves-light btn"><i class="material-icons left">done</i>Submit</a>
            <br><br><br>
        </div>
    </main>
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.99.0/js/materialize.min.js"></script>
</body>

</html>
<script type="text/javascript">
const questionArray = ['Pizza?', 'Cookies?', 'Cake?', 'Steak?', 'Fruit?', 'Vegetables?', 'Sushi?', 'Tacos?', 'Chicken?', 'Ice Cream'];
for (let key in questionArray) {
    let num = parseInt(key) + 1;
    var newDiv = $(`<h5>Question ${num}</h5>
                <h5>${questionArray[key]}</h5>
                <div class="row">
                    <div class="col s4">
               <select id="dropdown${num}" class="hover">
                  <option value="" disabled selected>1 = Strongly Agree, 5 = Strongly Disagree</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
               </select>   
                </div> 
                <br>
                </div>`);
    $('.bacon').append(newDiv);
}

// Initialize collapse button
$('select').material_select();
$(".button-collapse").sideNav();
// Initialize collapsible (uncomment the line below if you use the dropdown variation)
//$('.collapsible').collapsible();


// Question: What does this code do?
$(".btn").on("click", function(event) {
    event.preventDefault();
    var newCharacter = {
        name: $("#first_name").val().trim(),
        photo: $("#photo").val().trim(),
        q1: $('#dropdown1 option:selected').attr('value'),
        q2: $('#dropdown2 option:selected').attr('value'),
        q3: $('#dropdown3 option:selected').attr('value'),
        q4: $('#dropdown4 option:selected').attr('value'),
        q5: $('#dropdown5 option:selected').attr('value'),
        q6: $('#dropdown6 option:selected').attr('value'),
        q7: $('#dropdown7 option:selected').attr('value'),
        q8: $('#dropdown8 option:selected').attr('value'),
        q9: $('#dropdown9 option:selected').attr('value'),
        q10: $('#dropdown10 option:selected').attr('value'),
    };

    // Question: What does this code do??
    $.post("/api/new", newCharacter)
        .done(function(data) {
            console.log(data);
            Materialize.toast('I am a toast!', 2000);
        });
});
</script>